<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style type="text/css">
            #placeholder {
                width: 100%;
                height: 600px;
            }
        </style>
    </head>
    <body>
        <div>Test</div>
        <div id="placeholder"></div>
        <script type="text/javascript" src="/wave/resources/js/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="/wave/resources/js/jquery.flot-0.8.3.min.js"></script>
        <script type="text/javascript">
            $(function () {

                var points = 100000;
                var sin = [],
                        cos = [];

                console.log('points: ' + points);
                console.time("generator");
                for (var i = 0; i < points; i += 0.5) {
                    sin.push([i, Math.sin(i)]);
                    //cos.push([i, Math.cos(i)]);
                }
                console.timeEnd("generator");

                console.time("render");
                var plot = $.plot("#placeholder", [
                    {data: sin, label: "sin(x)"}/*,
                     {data: cos, label: "cos(x)"}*/
                ], {
                    series: {
                        lines: {
                            show: true
                        },
                        points: {
                            show: false
                        }
                    },
                    grid: {
                        hoverable: true,
                        clickable: true
                    },
                    yaxis: {
                        min: -1.2,
                        max: 1.2
                    }
                });
                console.timeEnd("render");

                $("<div id='tooltip'></div>").css({
                    position: "absolute",
                    display: "none",
                    border: "1px solid #fdd",
                    padding: "2px",
                    "background-color": "#fee",
                    opacity: 0.80
                }).appendTo("body");

                $("#placeholder").bind("plothover", function (event, pos, item) {

                    if ($("#enablePosition:checked").length > 0) {
                        var str = "(" + pos.x.toFixed(2) + ", " + pos.y.toFixed(2) + ")";
                        $("#hoverdata").text(str);
                    }

                    if ($("#enableTooltip:checked").length > 0) {
                        if (item) {
                            var x = item.datapoint[0].toFixed(2),
                                    y = item.datapoint[1].toFixed(2);

                            $("#tooltip").html(item.series.label + " of " + x + " = " + y)
                                    .css({top: item.pageY + 5, left: item.pageX + 5})
                                    .fadeIn(200);
                        } else {
                            $("#tooltip").hide();
                        }
                    }
                });

                $("#placeholder").bind("plotclick", function (event, pos, item) {
                    if (item) {
                        $("#clickdata").text(" - click point " + item.dataIndex + " in " + item.series.label);
                        plot.highlight(item.series, item.datapoint);
                    }
                });
            });
        </script>
    </body>
</html>
